resources:
  - name: sample_node
    type: gitRepo
    repoPath: ankul-shippable/sample_node
    configuration:
      integrationName: github_int
      branches:
        only: master
    initialVersion:
      sha: master
      
  - name: file_res
    type: file
    fileLocation: https://github.com/ankul-shippable/sample_java/blob/master2/pipelines.config
    configuration:
      integrationName: github_int
    initialVersion:
      fileName: pipelines.config
      fileDtTm: master      

pipelines:
  - name: pipeline_1
    setup:
      runtime: onHost
    steps:
      - name: circular_dep_step
        type: bash
        triggeredBy:
          resources:
            - file_res
        outputResources:
          - file_res
        execution:
          onExecute:
            - echo "executing step_0..."      
    
      - name: step_0
        type: bash
        execution:
          onExecute:
            - echo "executing step_0..."  
            
      - name: step_0b
        type: bash
        execution:
          onExecute:
            - echo "executing step_0b..."              
    
      - name: step_A
        type: bash
        requires:
          steps:
            - step_0
        triggeredBy:
          resources:
            - sample_node
          steps:
            - step_0b
        execution:
          onExecute:
            - echo "executing step_A..."
            
      - name: step_D
        type: bash
        triggeredBy:
          resources:
            - sample_node 
        execution:
          onExecute:
            - echo "executing step_D..."            

      - name: step_AA
        type: bash
        execution:
          onExecute:
            - echo "executing step_AA..."   

      - name: step_E
        type: bash
        triggeredBy:
          steps:
            - step_A
            - step_AA
        execution:
          onExecute:
            - echo "executing step_E..."

      - name: step_B
        type: bash
        triggeredBy:
          steps:
            - step_A
        execution:
          onExecute:
            - echo "executing step_B..."

      - name: step_C
        type: bash
        triggeredBy:
          steps:
            - step_B 
        execution:
          onExecute:
            - echo "executing step_C..."
